# Nixpacks configuration for Railway
[phases.setup]
nixPkgs = ["git", "curl"]

[phases.install]
cmds = ["pip install -r requirements.txt"]

[phases.build]
cmds = []

[start]
cmd = "python3 -c \"from models.database import engine, Base; Base.metadata.create_all(bind=engine); print('Database initialized')\" && python3 migrate_db.py || echo 'Migration skipped' && gunicorn main:app -w 2 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT --timeout 120"
